{"version":3,"sources":["lib/ValueEventEmitter.ts","lib/errors.ts","evaluate.ts","components/VscodeMarkdownLayout.tsx","rpc-webview.ts","rpc-webview-handle.ts","lib/ValueSubscription.ts","components/LoadingBar/LoadingBar.tsx","App.tsx","index.tsx"],"names":["ValueEventEmitter","value","_this","this","Object","classCallCheck","_value","eventListeners","addEventListener","eventListener","push","removeEventListener","index","findIndex","listener","splice","newValue","_this2","forEach","call","require","startReportingRuntimeErrors","reportBuildError","dismissBuildErrorInOverlay","dismissBuildError","dismissRuntimeErrorsInOverlay","dismissRuntimeErrors","currentBuildError","hasRuntimeError","hasStartedReportingRuntimeErrors","startReportingRuntimeErrorsIfNotStarted","onError","handleRuntimeError","error","Error","message","EvaluationProgress","MDXProvider","bodyStyles","HR","styled","hr","_templateObject","props","theme","colorHeaderBorder","components","p","_templateObject2","h1","_templateObject3","h2","_templateObject4","h3","_templateObject5","h4","_templateObject6","h5","_templateObject7","h6","_templateObject8","pre","_templateObject9","colorPreCode","colorPreBackground","code","_templateObject10","thematicBreak","blockquote","_templateObject11","ul","_templateObject12","ol","_templateObject13","li","_templateObject14","table","_templateObject15","colorTableHeaderBorder","em","_templateObject16","strong","_templateObject17","a","_templateObject18","img","_templateObject19","vscodeLightTheme","colorBodyForeground","colorBodyBackground","vscodeDarkTheme","vscodeHighContrastTheme","VscodeMarkdownLayout","createLayout","_ref","forceLightTheme","webviewTheme","document","body","classList","contains","_ref2","children","useEffect","originalColorBodyForeground","style","color","originalColorBodyBackground","backgroundColor","react_default","createElement","styled_components_browser_esm","Fragment","MDXTagModule","preloadedModules","npm://react@latest","npm://react-dom@latest","npm://@mdx-js/tag@latest","npm://vscode-markdown-layout@latest","rpcFetcher","asyncToGenerator","regenerator_default","mark","_callee","url","meta","splitResult","originalRequest","requiredById","request","isBare","_splitResult$name","name","_splitResult$pathname","fetchResult","fsPath","dependencies","css","wrap","_context","prev","next","hasOwnProperty","abrupt","id","splitNPMURL","version","pathname","ExtensionHandle","fetch","sent","concat","stop","_x","_x2","apply","arguments","polestar","createPolestar","globals","process","env","NODE_ENV","global","moduleThis","window","fetcher","onEntry","console","preloadPromise","Promise","all","preloadModule","React","ReactDOM","vscodeMarkdownLayout","evaluationProgress","NOT_STARTED","_callee2","entryFilePath","entryFileDependencies","evaluationStartTime","evaluatedModule","evaluationEndTime","_context2","IN_PROGRESS","performance","now","clearError","evaluate","undefined","reportPerformance","t0","COMPLETED","finish","invalidate","_x6","_invalidate","_callee3","_context3","unload","RPCWebviewHandle","_x3","_x4","_x5","_evaluate","handleBuildError","vscodeApi","acquireVsCodeApi","WebviewProxy","self","bind","postMessage","ValueSubscription","createSubscription","getCurrentValue","source","subscribe","callback","LoadingBar","_useState","useState","_useState2","slicedToArray","isPastDuration","setPastDuration","setTimeout","lib_ValueSubscription","progress","className","opacity","App","components_LoadingBar_LoadingBar","Component","webviewEndpont","comlink","webviewHandle","handshake","initRPCWebviewSide","render","src_App_0","getElementById"],"mappings":"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","file":"static/js/main.c08d1a24.chunk.js","sourcesContent":["export default class ValueEventEmitter {\n  _value: any;\n  private eventListeners: Array<(value: any) => any> = [];\n  constructor(value?: any) {\n    this._value = value;\n  }\n  get value() {\n    return this._value;\n  }\n  set value(newValue: any) {\n    this._value = newValue;\n    this.eventListeners.forEach(eventListener => {\n      eventListener.call(null, this.value);\n    });\n  }\n  addEventListener = (eventListener: (value: any) => any) => {\n    this.eventListeners.push(eventListener);\n    return () => {\n      this.removeEventListener(eventListener);\n    };\n  }\n  removeEventListener = (eventListener: (value: any) => any) => {\n    const index = this.eventListeners.findIndex(\n      listener => listener === eventListener\n    );\n    if (index !== -1) {\n      this.eventListeners.splice(index, 1);\n    }\n  }\n}\n","\nconst {\n  startReportingRuntimeErrors,\n  reportBuildError,\n  dismissBuildError: dismissBuildErrorInOverlay,\n  dismissRuntimeErrors: dismissRuntimeErrorsInOverlay,\n} = require('react-error-overlay');\n\nlet currentBuildError: Error | null = null;\nlet hasRuntimeError = false;\n\nlet hasStartedReportingRuntimeErrors = false;\nfunction startReportingRuntimeErrorsIfNotStarted() {\n  if (!hasStartedReportingRuntimeErrors) {\n    startReportingRuntimeErrors({ onError: () => {} });\n    hasStartedReportingRuntimeErrors = true;\n  }\n}\n\nconst dismissBuildError = () => {\n  currentBuildError = null;\n  dismissBuildErrorInOverlay();\n};\n\nconst dismissRuntimeErrors = () => {\n  hasRuntimeError = false;\n  dismissRuntimeErrorsInOverlay();\n};\n\nconst handleBuildError = (error: Error) => {\n  currentBuildError = error;\n  if (error.message) {\n    reportBuildError(error.message);\n  }\n};\n\n/**\n * Consolidating all runtime errors here.\n * @param error error to handle\n */\nconst handleRuntimeError = (error: Error) => {\n  hasRuntimeError = true;\n  throw new Error(error.message);\n};\n\nexport {\n  startReportingRuntimeErrorsIfNotStarted,\n  currentBuildError,\n  hasRuntimeError,\n  dismissBuildError,\n  dismissRuntimeErrors,\n  handleBuildError,\n  handleRuntimeError,\n};","import ValueEventEmitter from './lib/ValueEventEmitter';\nimport {\n  currentBuildError,\n  dismissBuildError,\n  hasRuntimeError,\n  dismissRuntimeErrors,\n  handleRuntimeError,\n} from './lib/errors';\nimport { ExtensionHandle } from './rpc-webview';\nimport { createPolestar, splitNPMURL, FetchMeta } from '@dxflow/polestar';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nconst MDXTagModule = require('@mdx-js/tag'); // no type defs\nimport vscodeMarkdownLayout from './components/VscodeMarkdownLayout';\n\nconst preloadedModules: { [key: string]: string } = {\n  \"npm://react@latest\": \"npm://react@16.8.6\",\n  \"npm://react-dom@latest\": \"npm://react-dom@16.8.6\",\n  \"npm://@mdx-js/tag@latest\": \"npm://@mdx-js/tag@0.20.3\",\n  \"npm://vscode-markdown-layout@latest\": \"npm://vscode-markdown-layout@0.1.0\",\n};\n\n/**\n * Fetcher implementation\n * @param url \n * @param meta \n */\nconst rpcFetcher = async (url: string, meta: FetchMeta) => {\n  // console.log('fetching:', url, meta);\n  if (preloadedModules.hasOwnProperty(url)) {\n    // console.log('fetched preloaded module:' + preloadedModules[url]);\n    return {\n      id: preloadedModules[url],\n      url,\n      code: ''\n    };\n  }\n\n  const splitResult = splitNPMURL(url);\n  const { originalRequest, requiredById } = meta;\n  let request, isBare;\n  if (splitResult) {\n    let { name = '', version, pathname = '' } = splitResult;\n    request = name + pathname;\n    isBare = true;\n  } else {\n    request = originalRequest;\n    isBare = false;\n  }\n\n  const fetchResult = await ExtensionHandle.fetch(\n    request,\n    isBare,\n    requiredById\n  );\n  if (!fetchResult) {\n    // TODO: yarn add if we didn't install the npm dependency \n    throw new Error(`Fetching ${request} failed.`);\n  }\n  const { fsPath, code, dependencies, css } = fetchResult;\n\n  // console.log('fetched:', fsPath, code, dependencies, `isCSS: ${css}`);\n  return {\n    id: fsPath,\n    url,\n    code,\n    dependencies,\n    css,\n  };\n};\n\n/**\n * Polestar instantiation\n */\nconst polestar = createPolestar({\n  globals: {\n    process: {\n      env: {\n        NODE_ENV: 'production'\n      },\n    },\n    global: {},\n  },\n  moduleThis: window,\n  fetcher: rpcFetcher,\n  onEntry: () => {},\n  onError: error => {\n    console.error(error);\n  },\n});\n\nconst preloadPromise = Promise.all([\n  polestar.preloadModule(\"npm://react@16.8.6\", React),\n  polestar.preloadModule(\"npm://react-dom@16.8.6\", ReactDOM),\n  polestar.preloadModule(\"npm://@mdx-js/tag@0.20.3\", MDXTagModule),\n  polestar.preloadModule(\"npm://vscode-markdown-layout@0.1.0\", vscodeMarkdownLayout)\n]);\n\nexport enum EvaluationProgress {\n  NOT_STARTED,\n  IN_PROGRESS,\n  COMPLETED\n}\n\nexport const evaluationProgress = new ValueEventEmitter(EvaluationProgress.NOT_STARTED);\n\nexport async function evaluate(code: string, entryFilePath: string, entryFileDependencies: Array<string>) {\n  evaluationProgress.value = EvaluationProgress.IN_PROGRESS;\n  const evaluationStartTime = performance.now();\n\n  if (currentBuildError) {\n    dismissBuildError();\n    await polestar.clearError();\n    dismissRuntimeErrors();\n  }\n\n  await preloadPromise;\n\n  try {\n    if (hasRuntimeError) {\n      await polestar.clearError();\n      dismissRuntimeErrors();\n    }\n    let evaluatedModule = await polestar.evaluate(\n      entryFileDependencies,\n      code,\n      undefined,\n      entryFilePath\n    );\n    const evaluationEndTime = performance.now();\n    ExtensionHandle.reportPerformance(evaluationEndTime - evaluationStartTime);\n    return evaluatedModule;\n  } catch(error) {\n    handleRuntimeError(error);\n  } finally {\n    evaluationProgress.value = EvaluationProgress.COMPLETED;\n  }\n}\n\nexport async function invalidate(fsPath: string) {\n  await polestar.unload(fsPath);\n}","/**\n * MDX implementation of VSCode Markdown Preview Styles\n * Styles are from:\n * https://github.com/Microsoft/vscode/blob/master/extensions/markdown-language-features/media/markdown.css\n * Copyright (c) 2015 - present Microsoft Corporation\n *\n * Components customization list from:\n * https://github.com/ChristopherBiscardi/gatsby-mdx/tree/master/packages/gatsby-mdx#mdxprovider\n */\nimport React, { useEffect, ReactElement } from 'react';\nconst { MDXProvider } = require('@mdx-js/tag');\nimport styled, { ThemeProvider } from 'styled-components';\n\nconst bodyStyles = `\n\tfont-family: -apple-system, BlinkMacSystemFont, \"Segoe WPC\", \"Segoe UI\", \"Ubuntu\", \"Droid Sans\", sans-serif;\n  word-wrap: break-word;\n`;\n\nconst HR = styled.hr`\n  ${bodyStyles}\n  border: 0;\n  height: 2px;\n  border-bottom: 2px solid;\n  border-color: ${props => props.theme.colorHeaderBorder};\n`;\n\nconst components = {\n  p: styled.p`\n    ${bodyStyles}\n    font-size: 14px;\n    line-height: 1.6;\n    code {\n      font-family: Menlo, Monaco, Consolas, 'Droid Sans Mono', 'Courier New',\n        monospace, 'Droid Sans Fallback';\n    }\n  `,\n  h1: styled.h1`\n    ${bodyStyles}\n    padding-bottom: 0.3em;\n    line-height: 1.2;\n    border-color: ${props => props.theme.colorHeaderBorder};\n    border-bottom-width: 1px;\n    border-bottom-style: solid;\n    font-weight: normal;\n    font-size: 28px;\n    code {\n      font-family: Menlo, Monaco, Consolas, 'Droid Sans Mono', 'Courier New',\n        monospace, 'Droid Sans Fallback';\n      font-size: inherit;\n      line-height: auto;\n    }\n    a {\n      font-size: inherit;\n      line-height: inherit;\n    }\n  `,\n  h2: styled.h2`\n    ${bodyStyles}\n    font-weight: normal;\n    font-size: 21px;\n    code {\n      font-family: Menlo, Monaco, Consolas, 'Droid Sans Mono', 'Courier New',\n        monospace, 'Droid Sans Fallback';\n      font-size: inherit;\n      line-height: auto;\n    }\n    a {\n      font-size: inherit;\n      line-height: inherit;\n    }\n    line-height: 1.6;\n  `,\n  h3: styled.h3`\n    ${bodyStyles}\n    font-weight: normal;\n    font-size: 16.38px;\n    code {\n      font-family: Menlo, Monaco, Consolas, 'Droid Sans Mono', 'Courier New',\n        monospace, 'Droid Sans Fallback';\n      font-size: inherit;\n      line-height: auto;\n    }\n    a {\n      font-size: inherit;\n      line-height: inherit;\n    }\n    line-height: 1.6;\n  `,\n  h4: styled.h4`\n    ${bodyStyles}\n    font-size: 14px;\n    code {\n      font-family: Menlo, Monaco, Consolas, 'Droid Sans Mono', 'Courier New',\n        monospace, 'Droid Sans Fallback';\n      font-size: inherit;\n      line-height: auto;\n    }\n    a {\n      font-size: inherit;\n      line-height: inherit;\n    }\n    line-height: 1.6;\n  `,\n  h5: styled.h5`\n    ${bodyStyles}\n    font-size: 11.62px;\n    code {\n      font-family: Menlo, Monaco, Consolas, 'Droid Sans Mono', 'Courier New',\n        monospace, 'Droid Sans Fallback';\n      font-size: inherit;\n      line-height: auto;\n    }\n    a {\n      font-size: inherit;\n      line-height: inherit;\n    }\n    line-height: 1.6;\n  `,\n  h6: styled.h6`\n    ${bodyStyles}\n    font-size: 9.38px;\n    code {\n      font-family: Menlo, Monaco, Consolas, 'Droid Sans Mono', 'Courier New',\n        monospace, 'Droid Sans Fallback';\n      font-size: inherit;\n      line-height: auto;\n    }\n    a {\n      font-size: inherit;\n      line-height: inherit;\n    }\n    line-height: 1.6;\n  `,\n  pre: styled.pre`\n    ${bodyStyles}\n    code {\n      color: ${props => props.theme.colorPreCode};\n    }\n    background-color: ${props => props.theme.colorPreBackground};\n\n    /* wordWrap */\n    white-space: pre-wrap;\n\n    padding: 16px;\n    border-radius: 3px;\n    overflow: auto;\n  `,\n  code: styled.code`\n    ${bodyStyles}\n    font-family: Menlo, Monaco, Consolas, 'Droid Sans Mono', 'Courier New',\n      monospace, 'Droid Sans Fallback';\n    font-size: 14px;\n    line-height: 19px;\n  `,\n  thematicBreak: HR,\n  blockquote: styled.blockquote`\n    ${bodyStyles}\n    margin: 0 7px 0 5px;\n    padding: 0 16px 0 10px;\n    border-left-width: 5px;\n    border-left-style: solid;\n  `,\n  ul: styled.ul`\n    ${bodyStyles}\n    font-size: 14px;\n    line-height: 1.6;\n    code {\n      font-family: Menlo, Monaco, Consolas, 'Droid Sans Mono', 'Courier New',\n        monospace, 'Droid Sans Fallback';\n    }\n  `,\n  ol: styled.ol`\n    ${bodyStyles}\n    font-size: 14px;\n    line-height: 1.6;\n    code {\n      font-family: Menlo, Monaco, Consolas, 'Droid Sans Mono', 'Courier New',\n        monospace, 'Droid Sans Fallback';\n    }\n  `,\n  li: styled.li`\n    ${bodyStyles}\n    font-size: 14px;\n    line-height: 1.6;\n  `,\n  table: styled.table`\n    ${bodyStyles}\n    font-size: 14px;\n    line-height: 1.6;\n    border-collapse: collapse;\n    > thead > tr > th {\n      text-align: left;\n      border-bottom: 1px solid;\n    }\n    > thead > tr > th,\n    > thead > tr > td,\n    > tbody > tr > th,\n    > tbody > tr > td {\n      padding: 5px 10px;\n    }\n    > tbody > tr + tr > td {\n      border-top: 1px solid;\n    }\n\n    /* dark */\n    > thead > tr > th {\n      border-color: ${props => props.theme.colorTableHeaderBorder};\n    }\n    > tbody > tr + tr > td {\n      border-color: ${props => props.theme.colorHeaderBorder};\n    }\n    code {\n      font-family: Menlo, Monaco, Consolas, 'Droid Sans Mono', 'Courier New',\n        monospace, 'Droid Sans Fallback';\n    }\n  `,\n  em: styled.em`\n    ${bodyStyles}\n  `,\n  strong: styled.strong`\n    ${bodyStyles}\n  `,\n  hr: HR,\n  a: styled.a`\n    ${bodyStyles}\n    text-decoration: none;\n    :hover {\n      text-decoration: underline;\n    }\n    :focus {\n      outline: 1px solid -webkit-focus-ring-color;\n      outline-offset: -1px;\n    }\n    font-size: 14px;\n    line-height: 1.6;\n  `,\n  img: styled.img`\n    ${bodyStyles}\n    max-width: 100%;\n    max-height: 100%;\n    font-size: 14px;\n    line-height: 1.6;\n  `,\n};\n\nconst vscodeLightTheme = {\n  colorBodyForeground: 'var(--vscode-editor-foreground)',\n  colorBodyBackground: 'var(--vscode-editor-background)',\n  colorPreCode: 'var(--vscode-editor-foreground)',\n  colorPreBackground: 'rgba(220, 220, 220, 0.4)',\n  colorTableHeaderBorder: 'rgba(0, 0, 0, 0.69)',\n  colorHeaderBorder: 'rgba(0, 0, 0, 0.18)',\n};\n\nconst vscodeDarkTheme = {\n  colorBodyForeground: 'var(--vscode-editor-foreground)',\n  colorBodyBackground: 'var(--vscode-editor-background)',\n  colorPreCode: 'var(--vscode-editor-foreground)',\n  colorPreBackground: 'rgba(10, 10, 10, 0.4)',\n  colorTableHeaderBorder: 'rgba(255, 255, 255, 0.69)',\n  colorHeaderBorder: 'rgba(255, 255, 255, 0.18)',\n};\n\nconst vscodeHighContrastTheme = {\n  colorBodyForeground: 'var(--vscode-editor-foreground)',\n  colorBodyBackground: 'var(--vscode-editor-background)',\n  colorPreCode: 'var(--vscode-editor-foreground)',\n  colorPreBackground: 'rgb(0, 0, 0)',\n  colorTableHeaderBorder: 'inherit',\n  colorHeaderBorder: 'inherit',\n};\n\nconst createLayout = ({ forceLightTheme }: { forceLightTheme?: boolean }) => {\n  let webviewTheme = vscodeLightTheme;\n  if (!forceLightTheme) {\n    // infer webview theme from document.body\n    if (document.body) {\n      if (document.body.classList.contains('vscode-light')) {\n        webviewTheme = vscodeLightTheme;\n      } else if (document.body.classList.contains('vscode-dark')) {\n        webviewTheme = vscodeDarkTheme;\n      } else if (document.body.classList.contains('vscode-high-contrast')) {\n        webviewTheme = vscodeHighContrastTheme;\n      }\n    }\n  } else {\n    webviewTheme.colorBodyForeground = 'black';\n    webviewTheme.colorBodyBackground = 'white';\n    webviewTheme.colorPreCode = 'black';\n  }\n  \n  const Layout = ({ children }: { children: ReactElement }) => {\n    useEffect(() => {\n      const originalColorBodyForeground = document.body.style.color;\n      const originalColorBodyBackground = document.body.style.backgroundColor;\n      document.body.style.color = webviewTheme.colorBodyForeground;\n      document.body.style.backgroundColor = webviewTheme.colorBodyBackground;\n      return () => {\n        document.body.style.color = originalColorBodyForeground;\n        document.body.style.backgroundColor = originalColorBodyBackground;\n      };\n    });\n\n    return (\n      <ThemeProvider theme={webviewTheme}>\n        <MDXProvider components={components}>\n          <>{children}</>\n        </MDXProvider>\n      </ThemeProvider>\n    );\n  };\n  return Layout;\n};\n\nexport default { createLayout };\n","import * as comlink from 'comlink';\nimport { Endpoint } from 'comlink';\nimport RPCWebviewHandle from './rpc-webview-handle';\n\ndeclare const acquireVsCodeApi: Function;\nconst vscodeApi = acquireVsCodeApi();\n\nclass WebviewProxy implements Endpoint{\n  // post to extension\n  postMessage(message: any) {\n    vscodeApi.postMessage(message);\n  }\n  // bind window's event listeners so comlink can listen on message\n  addEventListener = self.addEventListener.bind(self);\n  removeEventListener = self.removeEventListener.bind(self);\n}\n\n// TODO: types\nlet ExtensionHandle: any;\nexport function initRPCWebviewSide() {\n  // Webview to extension calls\n  const webviewEndpont = new WebviewProxy();\n  ExtensionHandle = comlink.proxy(webviewEndpont);\n\n  // Extension to webview calls\n  const webviewHandle = new RPCWebviewHandle();\n  comlink.expose(webviewHandle, webviewEndpont);\n\n  ExtensionHandle.handshake();\n}\n\nexport { ExtensionHandle };\n","import { evaluate, invalidate } from './evaluate';\nimport {\n  startReportingRuntimeErrorsIfNotStarted,\n  handleBuildError,\n} from './lib/errors';\n\nclass RPCWebviewHandle {\n  constructor() {}\n\n  updatePreview(code: string, entryFilePath: string, entryFileDependencies: Array<string>) {\n    startReportingRuntimeErrorsIfNotStarted();\n    evaluate(code, entryFilePath, entryFileDependencies);\n  }\n\n  showPreviewError(error: Error) {\n    startReportingRuntimeErrorsIfNotStarted();\n    handleBuildError(error);\n  }\n\n  async invalidate(fsPath: string) {\n    await invalidate(fsPath);\n  }\n}\n\nexport default RPCWebviewHandle;","import { createSubscription } from 'create-subscription';\nimport ValueEventEmitter from './ValueEventEmitter';\n\nconst ValueSubscription = createSubscription({\n  getCurrentValue(source: ValueEventEmitter) {\n    return source.value;\n  },\n  subscribe(source: ValueEventEmitter, callback) {\n    return source.addEventListener(callback);\n  },\n});\n\nexport default ValueSubscription;","import React, { useState, useEffect } from 'react';\nimport ValueSubscription from '../../lib/ValueSubscription';\nimport { evaluationProgress, EvaluationProgress } from '../../evaluate';\nimport './LoadingBar.css';\n\nconst SHOW_AFTER_DURATION = 1500;\n\nconst LoadingBar = () => {\n  const [isPastDuration, setPastDuration] = useState(false);\n  useEffect(() => {\n    setTimeout(() => {\n      setPastDuration(true);\n    }, SHOW_AFTER_DURATION);\n  }, [isPastDuration]);\n  return (\n    <ValueSubscription source={evaluationProgress}>\n      {progress =>\n        progress === EvaluationProgress.IN_PROGRESS && isPastDuration ? (\n          <div className=\"monaco-progress-container active infinite\">\n            <div\n              className=\"progress-bit\"\n              style={{\n                backgroundColor: '#0E70C0',\n                opacity: 1,\n              }}\n            />\n          </div>\n        ) : null\n      }\n    </ValueSubscription>\n  );\n};\n\nexport default LoadingBar;\n","import React, { Component } from 'react';\nimport LoadingBar from './components/LoadingBar/LoadingBar';\nimport './App.css';\n\nclass App extends Component {\n  componentDidMount() {}\n\n  componentWillUnmount() {}\n\n  render() {\n    return <LoadingBar />;\n  }\n}\n\nexport default App;\n","import { initRPCWebviewSide } from './rpc-webview';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\n\nimport App from './App';\n\ninitRPCWebviewSide();\n\nReactDOM.render(<App />, document.getElementById('root'));"],"sourceRoot":""}